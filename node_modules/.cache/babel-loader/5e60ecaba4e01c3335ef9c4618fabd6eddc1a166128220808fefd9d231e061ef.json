{"ast":null,"code":"import API from \"../../API\";\nimport { addFavouritesAction, fetchFavouritesAction, deleteFavouritesAction } from \"./action\";\nconst api = new API();\nconst FAVOURITES_KEY = \"FAVOURITES_KEY\";\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let favouritsJSON = localStorage.getItem(FAVOURITES_KEY);\n    let favourites = [];\n    if (favouritsJSON) {\n      favourites = JSON.parse(favouritsJSON);\n    }\n    dispatch(fetchFavouritesAction(favourites));\n  };\n};\nexport const addFavourite = place => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    console.log(\"prevFavourites\", place);\n    let nextFavorites = prevFavourites;\n    if (!prevFavourites.some(favourite => favourite.id === place.id)) {\n      nextFavorites = [place, ...prevFavourites];\n    }\n    setToLocalStorage(nextFavorites);\n    dispatch(addFavouritesAction(nextFavorites));\n  };\n};\nexport const deleteFavourite = id => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = prevFavourites.filter(image => image.id !== id);\n    setToLocalStorage(nextFavourites);\n    dispatch(deleteFavouritesAction(nextFavourites));\n  };\n};\nexport const setToLocalStorage = favourites => {\n  localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\n};","map":{"version":3,"names":["API","addFavouritesAction","fetchFavouritesAction","deleteFavouritesAction","api","FAVOURITES_KEY","fetchFromLocalStorage","dispatch","favouritsJSON","localStorage","getItem","favourites","JSON","parse","addFavourite","place","getState","prevFavourites","list","console","log","nextFavorites","some","favourite","id","setToLocalStorage","deleteFavourite","nextFavourites","filter","image","setItem","stringify"],"sources":["/Users/musubimanagement/Desktop/faa/sarank/frontend/src/reducks/favorites/operations.js"],"sourcesContent":["import API from \"../../API\";\nimport {\n  addFavouritesAction,\n  fetchFavouritesAction,\n  deleteFavouritesAction,\n} from \"./action\";\nconst api = new API();\n\nconst FAVOURITES_KEY = \"FAVOURITES_KEY\";\nexport const fetchFromLocalStorage = () => {\n  return async (dispatch) => {\n    let favouritsJSON = localStorage.getItem(FAVOURITES_KEY);\n    let favourites = [];\n    if (favouritsJSON) {\n      favourites = JSON.parse(favouritsJSON);\n    }\n    dispatch(fetchFavouritesAction(favourites));\n  };\n};\nexport const addFavourite = (place) => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    console.log(\"prevFavourites\",place);\n    let nextFavorites = prevFavourites\n    if(!prevFavourites.some(favourite=>favourite.id === place.id)){\n    nextFavorites = [place, ...prevFavourites];\n    }\n    setToLocalStorage(nextFavorites);\n    dispatch(addFavouritesAction(nextFavorites));\n  };\n};\nexport const deleteFavourite = (id) => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = prevFavourites.filter((image) => image.id !== id);\n    setToLocalStorage(nextFavourites);\n    dispatch(deleteFavouritesAction(nextFavourites));\n  };\n};\nexport const setToLocalStorage = (favourites) => {\n  localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\n};"],"mappings":"AAAA,OAAOA,GAAG,MAAM,WAAW;AAC3B,SACEC,mBAAmB,EACnBC,qBAAqB,EACrBC,sBAAsB,QACjB,UAAU;AACjB,MAAMC,GAAG,GAAG,IAAIJ,GAAG,EAAE;AAErB,MAAMK,cAAc,GAAG,gBAAgB;AACvC,OAAO,MAAMC,qBAAqB,GAAG,MAAM;EACzC,OAAO,MAAOC,QAAQ,IAAK;IACzB,IAAIC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAACL,cAAc,CAAC;IACxD,IAAIM,UAAU,GAAG,EAAE;IACnB,IAAIH,aAAa,EAAE;MACjBG,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,aAAa,CAAC;IACxC;IACAD,QAAQ,CAACL,qBAAqB,CAACS,UAAU,CAAC,CAAC;EAC7C,CAAC;AACH,CAAC;AACD,OAAO,MAAMG,YAAY,GAAIC,KAAK,IAAK;EACrC,OAAO,OAAOR,QAAQ,EAAES,QAAQ,KAAK;IACnC,IAAIC,cAAc,GAAGD,QAAQ,EAAE,CAACL,UAAU,CAACO,IAAI;IAC/CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAACL,KAAK,CAAC;IACnC,IAAIM,aAAa,GAAGJ,cAAc;IAClC,IAAG,CAACA,cAAc,CAACK,IAAI,CAACC,SAAS,IAAEA,SAAS,CAACC,EAAE,KAAKT,KAAK,CAACS,EAAE,CAAC,EAAC;MAC9DH,aAAa,GAAG,CAACN,KAAK,EAAE,GAAGE,cAAc,CAAC;IAC1C;IACAQ,iBAAiB,CAACJ,aAAa,CAAC;IAChCd,QAAQ,CAACN,mBAAmB,CAACoB,aAAa,CAAC,CAAC;EAC9C,CAAC;AACH,CAAC;AACD,OAAO,MAAMK,eAAe,GAAIF,EAAE,IAAK;EACrC,OAAO,OAAOjB,QAAQ,EAAES,QAAQ,KAAK;IACnC,IAAIC,cAAc,GAAGD,QAAQ,EAAE,CAACL,UAAU,CAACO,IAAI;IAC/C,MAAMS,cAAc,GAAGV,cAAc,CAACW,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACL,EAAE,KAAKA,EAAE,CAAC;IACxEC,iBAAiB,CAACE,cAAc,CAAC;IACjCpB,QAAQ,CAACJ,sBAAsB,CAACwB,cAAc,CAAC,CAAC;EAClD,CAAC;AACH,CAAC;AACD,OAAO,MAAMF,iBAAiB,GAAId,UAAU,IAAK;EAC/CF,YAAY,CAACqB,OAAO,CAACzB,cAAc,EAAEO,IAAI,CAACmB,SAAS,CAACpB,UAAU,CAAC,CAAC;AAClE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}